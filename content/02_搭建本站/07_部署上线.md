---
title: 部署上线
description: 将站点构建并部署到 Linux 服务器，通过 Nginx 提供访问。
author: Refinex
createdAt: 2026-02-22
updatedAt: 2026-02-22
---

# 部署上线

Refinex Blog 是纯静态站点（SPA），生产构建产物在 `dist/` 目录，可以部署到任何支持静态文件托管的环境。

## 生产构建

```bash
npm run build
```

该命令会先执行 TypeScript 类型检查（`tsc -b`），再通过 Vite 构建生产产物。构建完成后，所有文件输出到 `dist/` 目录。

可以用 `npm run preview` 在本地预览构建结果，确认无误后再部署。

## 方案一：服务器上构建

适合有 CI/CD 流程或直接在服务器操作的场景。

**前置条件**：服务器已安装 Node.js ≥ 18（推荐 LTS 版本）。

```bash
# 克隆项目
git clone https://github.com/refinex-lab/Refinex-Blog.git
cd Refinex-Blog

# 安装依赖并构建
npm install
npm run build
```

构建完成后，将 `dist/` 目录配置为 Web 服务器的静态根目录。

## 方案二：本地构建后上传

适合没有 Node.js 环境的服务器，或希望在本地验证后再部署的场景。

```bash
# 本地构建
npm run build

# 上传 dist/ 到服务器（示例使用 scp）
scp -r dist/ user@your-server:/var/www/refinex-blog/dist
```

## Nginx 配置

由于本站是 SPA，所有路由都需要回退到 `index.html`。以下是一份参考配置：

```nginx
server {
    listen 80;
    server_name example.com;

    root /var/www/refinex-blog/dist;
    index index.html;

    # SPA 路由回退
    location / {
        try_files $uri $uri/ /index.html;
    }

    # 静态资源缓存（Vite 构建产物带 hash，可长期缓存）
    location /assets/ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # gzip 压缩
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml;
    gzip_min_length 1024;
}
```

配置完成后重载 Nginx：

```bash
sudo nginx -t          # 检查配置语法
sudo systemctl reload nginx
```

## HTTPS 配置（推荐）

使用 [Certbot](https://certbot.eff.org/) 可以快速为站点配置免费的 Let's Encrypt 证书：

```bash
sudo apt install certbot python3-certbot-nginx   # Debian/Ubuntu
sudo certbot --nginx -d example.com
```

Certbot 会自动修改 Nginx 配置并设置证书自动续期。

## 其他部署方式

本站的 `dist/` 产物是纯静态文件，也可以部署到：

- **对象存储 + CDN**：如阿里云 OSS、腾讯云 COS，配合 CDN 加速
- **GitHub Pages**：适合个人项目，注意需要配置 SPA 路由回退
- **Vercel / Netlify**：零配置部署，自动识别 Vite 项目

无论哪种方式，核心要点是确保所有路由都回退到 `index.html`。
